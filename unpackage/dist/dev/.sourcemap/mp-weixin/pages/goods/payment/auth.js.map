{"version":3,"sources":["webpack:///F:/杨生的学习资料/实战项目/baoli/main.js","webpack:///F:/杨生的学习资料/实战项目/baoli/pages/goods/payment/auth.vue?db22","webpack:///F:/杨生的学习资料/实战项目/baoli/pages/goods/payment/auth.vue?1e51","webpack:///F:/杨生的学习资料/实战项目/baoli/pages/goods/payment/auth.vue?4947","webpack:///F:/杨生的学习资料/实战项目/baoli/pages/goods/payment/auth.vue?e6a8","webpack:///F:/杨生的学习资料/实战项目/baoli/pages/goods/payment/auth.vue","webpack:///F:/杨生的学习资料/实战项目/baoli/pages/goods/payment/auth.vue?103f","webpack:///F:/杨生的学习资料/实战项目/baoli/pages/goods/payment/auth.vue?dcc1"],"names":["createPage","Page","data","type","openid","orderId","state","onLoad","options","order_id","money","Number","uid","$common","getQueryString","getCode","methods","code","getOpenId","scope","$api","res","status","toPayHandler","errorToShow","msg","checkWXJSBridge","that","interval","setInterval","window","WeixinJSBridge","clearTimeout","onBridgeReady","_this","invoke","appId","appid","timeStamp","nonceStr","package","signType","paySign","err_msg","successToShow","setTimeout","redirectTo","payment_id","payment_code","payment_type","trade_type","recharge","formid","pay"],"mappings":";;;;;;;;;;kDAAA;;AAEA;AACA,mG;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC1Cf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA8lB,CAAgB,wnBAAG,EAAC,C;;;;;;;;;;;;wFCAlnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;AACbC,MADa,kBACN;AACL,WAAO;AACLC,UAAI,EAAE,EADD;AAELC,YAAM,EAAE,EAFH;AAGLC,aAAO,EAAE,EAHJ;AAILC,WAAK,EAAE,EAJF,EAAP;;AAMD,GARY;AASbC,QATa,kBASNC,OATM,EASG;AACd,SAAKH,OAAL,GAAeG,OAAO,CAACC,QAAvB;AACA,SAAKC,KAAL,GAAaC,MAAM,CAACH,OAAO,CAACE,KAAT,CAAnB;AACA,SAAKP,IAAL,GAAYQ,MAAM,CAACH,OAAO,CAACL,IAAT,CAAlB;AACA,SAAKS,GAAL,GAAWD,MAAM,CAACH,OAAO,CAACI,GAAT,CAAjB;AACA,SAAKN,KAAL,GAAa,KAAKO,OAAL,CAAaC,cAAb,CAA4B,OAA5B,CAAb;AACA,SAAKC,OAAL;AACD,GAhBY;AAiBbC,SAAO,EAAE;AACPD,WADO,qBACG;AACR,UAAIE,IAAI,GAAG,KAAKJ,OAAL,CAAaC,cAAb,CAA4B,MAA5B,CAAX;AACAG,UAAI,IAAI,KAAKC,SAAL,CAAeD,IAAf,CAAR;AACD,KAJM;AAKPC,aALO,qBAKGD,IALH,EAKS;AACd,UAAIf,IAAI,GAAG;AACTe,YAAI,EAAEA,IADG;AAETE,aAAK,EAAE,CAFE;AAGTb,aAAK,EAAE,KAAKA;;AAEd;AALW,OAAX,CAMA,KAAKc,IAAL,CAAUF,SAAV,CAAoBhB,IAApB,EAA0B,UAAAmB,GAAG,EAAI;AAC/B,YAAIA,GAAG,CAACC,MAAR,EAAgB;AACd,gBAAI,CAAClB,MAAL,GAAciB,GAAG,CAACnB,IAAJ,CAASE,MAAvB;AACA,gBAAI,CAACmB,YAAL,CAAkB,WAAlB;AACD,SAHD,MAGO;AACL,gBAAI,CAACV,OAAL,CAAaW,WAAb,CAAyBH,GAAG,CAACI,GAA7B;AACD;AACF,OAPD;AAQD,KApBM;AAqBPC,mBArBO,2BAqBSxB,IArBT,EAqBe;AACpB,UAAIyB,IAAI,GAAG,IAAX;AACA,UAAIC,QAAQ,GAAGC,WAAW,CAAC,YAAM;AAC/B,YAAI,OAAOC,MAAM,CAACC,cAAd,IAAgC,WAApC,EAAiD;AAC/CC,sBAAY,CAACJ,QAAD,CAAZ;AACAD,cAAI,CAACM,aAAL,CAAmB/B,IAAnB;AACD;AACF,OALyB,EAKvB,GALuB,CAA1B;AAMD,KA7BM;AA8BP+B,iBA9BO,yBA8BO/B,IA9BP,EA8Ba;AAClB,UAAIgC,KAAK,GAAG,IAAZ;AACAJ,YAAM,CAACC,cAAP,CAAsBI,MAAtB;AACE,4BADF;AAEE;AACEC,aAAK,EAAElC,IAAI,CAACmC,KADd,EACqB;AACnBC,iBAAS,EAAEpC,IAAI,CAACoC,SAFlB,EAE6B;AAC3BC,gBAAQ,EAAErC,IAAI,CAACqC,QAHjB,EAG2B;AACzBC,eAAO,EAAEtC,IAAI,CAACsC,OAJhB;AAKEC,gBAAQ,EAAEvC,IAAI,CAACuC,QALjB,EAK2B;AACzBC,eAAO,EAAExC,IAAI,CAACwC,OANhB,CAMwB;AANxB,OAFF;AAUE,gBAASrB,GAAT,EAAc;AACZ,YAAIA,GAAG,CAACsB,OAAJ,KAAgB,4BAApB,EAAkD;AAChDT,eAAK,CAACrB,OAAN,CAAc+B,aAAd,CAA4B,MAA5B;AACD,SAFD,MAEO,IAAIvB,GAAG,CAACsB,OAAJ,KAAgB,gCAApB,EAAsD;AAC3DT,eAAK,CAACrB,OAAN,CAAcW,WAAd,CAA0B,MAA1B;AACD,SAFM,MAEA;AACLU,eAAK,CAACrB,OAAN,CAAcW,WAAd,CAA0B,MAA1B;AACD;AACDqB,kBAAU,CAAC,YAAM;AACfX,eAAK,CAACrB,OAAN,CAAciC,UAAd;AACE,8CAAoC5C,IAAI,CAAC6C,UAD3C;;AAGD,SAJS,EAIR,IAJQ,CAAV;AAKD,OAvBH;;AAyBD,KAzDM;AA0DPxB,gBA1DO,wBA0DMN,IA1DN,EA0DY;AACjB,UAAIf,IAAI,GAAG;AACT8C,oBAAY,EAAE/B,IADL;AAETgC,oBAAY,EAAE,KAAK9C,IAFV,EAAX;;AAIHD,UAAI,CAAC,KAAD,CAAJ,GAAe,KAAKC,IAAL,IAAa,CAAb,IAAkB,KAAKA,IAAL,IAAa,CAA/B,IAAoC,KAAKA,IAAL,IAAa,CAAlD,GAAuD,KAAKE,OAA5D,GAAsE,KAAKO,GAAzF;AACG;;AAEA,UAAI,KAAKT,IAAL,IAAa,CAAb,IAAkB,KAAKE,OAA3B,EAAoC;AAClC;AACA,YAAI,KAAKD,MAAT,EAAiB;AACfF,cAAI,CAAC,QAAD,CAAJ,GAAiB;AACfgD,sBAAU,EAAE,gBADG;AAEf9C,kBAAM,EAAE,KAAKA,MAFE,EAAjB;;AAID;AACF,OARD,MAQO,IAAI,KAAKD,IAAL,IAAa,CAAb,IAAkB,KAAKO,KAA3B,EAAkC;AACvC,YAAI,KAAKN,MAAT,EAAiB;AACfF,cAAI,CAAC,QAAD,CAAJ,GAAiB;AACfgD,sBAAU,EAAE,gBADG;AAEfxC,iBAAK,EAAE,KAAKA,KAFG;AAGfN,kBAAM,EAAE,KAAKA,MAHE,EAAjB;;AAKD;AACF,OARM,MAQD,IAAI,CAAC,KAAKD,IAAL,IAAa,CAAb,IAAkB,KAAKA,IAAL,IAAa,CAAhC,KAAsC,KAAKgD,QAA/C,EAAyD;AACnEjD,YAAI,CAAC,QAAD,CAAJ,GAAiB;AAChBgD,oBAAU,EAAE,gBADI;AAEhB9C,gBAAM,EAAE,KAAKA,MAFG;AAGhBgD,gBAAM,EAAE,KAAK/C,OAHG,EAAjB;;AAKE;AACE,WAAKe,IAAL,CAAUiC,GAAV,CAAcnD,IAAd,EAAoB,UAAAmB,GAAG,EAAI;AACzB,YAAIA,GAAG,CAACC,MAAR,EAAgB;AACd,cAAMpB,KAAI,GAAGmB,GAAG,CAACnB,IAAjB;AACA,gBAAI,CAACwB,eAAL,CAAqBxB,KAArB;AACD,SAHD,MAGO;AACL,gBAAI,CAACW,OAAL,CAAaW,WAAb,CAAyBH,GAAG,CAACI,GAA7B;AACD;AACF,OAPD;AAQD,KAjGM,EAjBI,E;;;;;;;;;;;;ACVf;AAAA;AAAA;AAAA;AAA42B,CAAgB,82BAAG,EAAC,C;;;;;;;;;;;ACAh4B,uC","file":"pages/goods/payment/auth.js","sourcesContent":["import 'uni-pages';\n\nimport Vue from 'vue'            \nimport Page from './pages/goods/payment/auth.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./auth.vue?vue&type=template&id=380e9eb7&\"\nvar renderjs\nimport script from \"./auth.vue?vue&type=script&lang=js&\"\nexport * from \"./auth.vue?vue&type=script&lang=js&\"\nimport style0 from \"./auth.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('380e9eb7')) {\n      api.createRecord('380e9eb7', component.options)\n    } else {\n      api.reload('380e9eb7', component.options)\n    }\n    module.hot.accept(\"./auth.vue?vue&type=template&id=380e9eb7&\", function () {\n      api.rerender('380e9eb7', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"F:/杨生的学习资料/实战项目/baoli/pages/goods/payment/auth.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./auth.vue?vue&type=template&id=380e9eb7&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./auth.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./auth.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  data() {\n    return {\n      type: '',\n      openid: '',\n      orderId: '',\n      state: ''\n    }\n  },\n  onLoad(options) {\n    this.orderId = options.order_id\n    this.money = Number(options.money)\n    this.type = Number(options.type)\n    this.uid = Number(options.uid)\n    this.state = this.$common.getQueryString('state')\n    this.getCode()\n  },\n  methods: {\n    getCode() {\n      var code = this.$common.getQueryString('code')\n      code && this.getOpenId(code)\n    },\n    getOpenId(code) {\n      let data = {\n        code: code,\n        scope: 2,\n        state: this.state\n      }\n      //模拟接口\n      this.$api.getOpenId(data, res => {\n        if (res.status) {\n          this.openid = res.data.openid\n          this.toPayHandler('wechatpay')\n        } else {\n          this.$common.errorToShow(res.msg)\n        }\n      })\n    },\n    checkWXJSBridge(data) {\n      let that = this\n      let interval = setInterval(() => {\n        if (typeof window.WeixinJSBridge != 'undefined') {\n          clearTimeout(interval)\n          that.onBridgeReady(data)\n        }\n      }, 200)\n    },\n    onBridgeReady(data) {\n      var _this = this\n      window.WeixinJSBridge.invoke(\n        'getBrandWCPayRequest',\n        {\n          appId: data.appid, // 公众号名称，由商户传入\n          timeStamp: data.timeStamp, // 时间戳，自1970年以来的秒数\n          nonceStr: data.nonceStr, // 随机串\n          package: data.package,\n          signType: data.signType, // 微信签名方式：\n          paySign: data.paySign // 微信签名\n        },\n        function(res) {\n          if (res.err_msg === 'get_brand_wcpay_request:ok') {\n            _this.$common.successToShow('支付成功')\n          } else if (res.err_msg === 'get_brand_wcpay_request:cancel') {\n            _this.$common.errorToShow('取消支付')\n          } else {\n            _this.$common.errorToShow('支付失败')\n          }\n          setTimeout(() => {\n            _this.$common.redirectTo(\n              '/pages/goods/payment/result?id=' + data.payment_id\n            )\n          },1000)\n        }\n      )\n    },\n    toPayHandler(code) {\n      let data = {\n        payment_code: code,\n        payment_type: this.type\n      }\n\t  data['ids'] = (this.type == 1 || this.type == 5 || this.type == 6) ? this.orderId : this.uid\n      //data['ids'] = this.type == 1 ? this.orderId : this.uid\n\t  \n      if (this.type == 1 && this.orderId) {\n        // 微信jsapi支付\n        if (this.openid) {\n          data['params'] = {\n            trade_type: 'JSAPI_OFFICIAL',\n            openid: this.openid\n          }\n        }\n      } else if (this.type == 2 && this.money) {\n        if (this.openid) {\n          data['params'] = {\n            trade_type: 'JSAPI_OFFICIAL',\n            money: this.money,\n            openid: this.openid\n          }\n        }\n      }else if ((this.type == 5 || this.type == 6) && this.recharge) {\n\t\tdata['params'] = {\n\t\t\ttrade_type: 'JSAPI_OFFICIAL',\n\t\t\topenid: this.openid,\n\t\t\tformid: this.orderId\n\t\t}\n\t  }\n      this.$api.pay(data, res => {\n        if (res.status) {\n          const data = res.data\n          this.checkWXJSBridge(data)\n        } else {\n          this.$common.errorToShow(res.msg)\n        }\n      })\n    }\n  }\n}\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./auth.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./auth.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}