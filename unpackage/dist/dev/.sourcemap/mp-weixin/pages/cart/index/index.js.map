{"version":3,"sources":["webpack:///F:/杨生的学习资料/实战项目/baoli/main.js","webpack:///F:/杨生的学习资料/实战项目/baoli/pages/cart/index/index.vue?091b","webpack:///F:/杨生的学习资料/实战项目/baoli/pages/cart/index/index.vue?9306","webpack:///F:/杨生的学习资料/实战项目/baoli/pages/cart/index/index.vue?ee8f","webpack:///F:/杨生的学习资料/实战项目/baoli/pages/cart/index/index.vue?1a9c","webpack:///F:/杨生的学习资料/实战项目/baoli/pages/cart/index/index.vue","webpack:///F:/杨生的学习资料/实战项目/baoli/pages/cart/index/index.vue?31a2","webpack:///F:/杨生的学习资料/实战项目/baoli/pages/cart/index/index.vue?635a"],"names":["createPage","Page","mixins","goods","data","startX","startY","cartData","cartIds","checkboxAll","total","goSettlement","cartId","cartNum","isLoad","cartNums","editStatus","components","uniNumberBox","onShow","userToken","$db","get","getCartData","computed","goods_stocks_warn","$store","state","config","methods","checkboxChange","e","_this","id","key","list","selected","setNumsData","isAllCheckbox","arrayToStr","array","toString","ids","$api","cartList","res","status","showHandle","flag","i","quantity","stockNo","maxStock","products","stock","stockTension","minStatus","maxStatus","spes","spes_desc","spesArray","split","spesOne","push","isTouchMove","indexOf","goods_pmt","$common","formatMoney","order_pmt","amount","length","n","promotion_list","checkboxAllButton","setAllCheckbox","k","type","bindChange","value","num","changeSelected","throttle","bindCartNumberOperation","setCartNum","$nextTick","errorToShow","msg","del","index","cartid","splice","removeCart","successToShow","collection","app","db","token","goods_id","currentTarget","dataset","goodsid","api","goodsCollection","isCollection","wx","showToast","title","complete","setTimeout","uni","hideToast","settlement","newData","substr","navigateTo","JSON","stringify","touchstart","forEach","v","setData","changedTouches","clientX","clientY","touchmove","touchMoveX","touchMoveY","angle","X","Y","Math","abs","start","end","_X","_Y","atan","PI","editBtn","editNoBtn","delList"],"mappings":"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","file":"pages/cart/index/index.js","sourcesContent":["import 'uni-pages';\n\nimport Vue from 'vue'            \nimport Page from './pages/cart/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=0891ecb3&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0891ecb3')) {\n      api.createRecord('0891ecb3', component.options)\n    } else {\n      api.reload('0891ecb3', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=0891ecb3&\", function () {\n      api.rerender('0891ecb3', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"F:/杨生的学习资料/实战项目/baoli/pages/cart/index/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=0891ecb3&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport uniNumberBox from '@/components/uni-number-box/uni-number-box.vue'\r\nimport { goods } from '@/config/mixins.js'\r\nexport default {\r\n  mixins: [goods],\r\n  data() {\r\n    return {\r\n      startX: 0, //开始坐标\r\n      startY: 0,\r\n      cartData: {}, //购物车数据\r\n      cartIds: [], //选中ids\r\n      checkboxAll: false, //全选按钮\r\n      total: 0.0, //总价\r\n      goSettlement: false, //去结算按钮\r\n      cartId: '',\r\n      cartNum: '',\r\n      isLoad: false,\r\n      cartNums: 0,\r\n      editStatus: false\r\n    }\r\n  },\r\n  components: { uniNumberBox },\r\n  //页面加载\r\n  onShow: function() {\r\n    let userToken = this.$db.get('userToken')\r\n    if (userToken) {\r\n      this.getCartData(); //获取购物车数据\r\n    }\r\n  },\r\n  computed: {\r\n    // 从vuex中获取店铺名称\r\n    // shopName() {\r\n    //   return this.$store.state.config.shop_name\r\n    // },\r\n    goods_stocks_warn() {\r\n      return this.$store.state.config.goods_stocks_warn\r\n    }\r\n  },\r\n  methods: {\r\n    checkboxChange: function(e) {\r\n      let _this = this\r\n      let id = e\r\n      let cartData = _this.cartData\r\n      for (let key in cartData.list) {\r\n        if (cartData.list[key].id == id) {\r\n          if (cartData.list[key].selected == true) {\r\n            cartData.list[key].selected = false\r\n          } else {\r\n            cartData.list[key].selected = true\r\n          }\r\n        }\r\n      }\r\n      _this.cartData = cartData\r\n      _this.setNumsData()\r\n      _this.isAllCheckbox()\r\n    },\r\n\r\n    //数组转字符串\r\n    arrayToStr: function(array) {\r\n      return array.toString()\r\n    },\r\n\r\n    //获取购物车数据\r\n    getCartData: function() {\r\n      let _this = this\r\n      let cartIds = _this.arrayToStr(_this.cartIds)\r\n\t  // let cartIds = '1,2'\r\n      let data = {\r\n        ids: cartIds,\r\n      }\r\n      this.$api.cartList(data, function(res) {\r\n        if (res.status) {\r\n          let data = res.data\r\n          _this.showHandle(data) //数量设置\r\n        }\r\n      })\r\n    },\r\n\r\n    //渲染前配置数据\r\n    showHandle: function(data, flag = true) {\r\n      let _this = this\r\n      let goSettlement = false\r\n      for (let i in data.list) {\r\n        //不可能购买0件\r\n        if (data.list[i].quantity < 1) {\r\n          data.list[i].quantity = 1\r\n        }\r\n        //不能买大于库存的数量(库存不足)\r\n        let stockNo = false\r\n        let maxStock = data.list[i].products.stock\r\n        if (data.list[i].quantity > data.list[i].products.stock) {\r\n          //data.list[i].quantity = data.list[i].products.stock;\r\n          stockNo = true\r\n          maxStock = data.list[i].quantity\r\n        }\r\n        data.list[i].maxStock = maxStock\r\n        data.list[i].stockNo = stockNo\r\n\r\n        //库存紧张\r\n        let stockTension = false\r\n        if (_this.goods_stocks_warn >= data.list[i].products.stock) {\r\n          stockTension = true\r\n        }\r\n        data.list[i].stockTension = stockTension\r\n\r\n        //设置样式\r\n        data.list[i].minStatus = 'normal'\r\n        data.list[i].maxStatus = 'normal'\r\n        if (data.list[i].quantity == 1) {\r\n          data.list[i].minStatus = 'disabled'\r\n        }\r\n        if (data.list[i].quantity == data.list[i].products.stock) {\r\n          data.list[i].maxStatus = 'disabled'\r\n        }\r\n\r\n        //设置规格参数\r\n        data.list[i].spes = []\r\n        if (data.list[i].products.spes_desc != null) {\r\n          let spesArray = data.list[i].products.spes_desc.split(',')\r\n          for (let key in spesArray) {\r\n            let spesOne = spesArray[key].split(':')\r\n            data.list[i].spes.push(spesOne[1])\r\n          }\r\n        }\r\n        //添加左滑效果\r\n        data.list[i].isTouchMove = false\r\n        //是否可以去支付\r\n        if (data.list[i].selected) {\r\n          goSettlement = true\r\n        }\r\n        //id转换为字符串\r\n        data.list[i].id = _this.arrayToStr(data.list[i].id)\r\n\r\n        //选中状态\r\n        if (flag) {\r\n          if (data.list[i].selected) {\r\n            if (_this.cartIds.indexOf(data.list[i].id) < 0) {\r\n              _this.cartIds.push(data.list[i].id)\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      data.goods_pmt = _this.$common.formatMoney(data.goods_pmt, 2, '')\r\n      data.order_pmt = _this.$common.formatMoney(data.order_pmt, 2, '')\r\n      data.amount = _this.$common.formatMoney(data.amount, 2, '')\r\n      let isLoad = false\r\n      if (data.list.length < 1) {\r\n        isLoad = true\r\n      }\r\n      let n = 0\r\n      for (let i in data.promotion_list) {\r\n        n++\r\n      }\r\n\r\n      _this.goSettlement = goSettlement\r\n      _this.isLoad = isLoad\r\n      _this.cartNums = n\r\n\r\n      if (flag) {\r\n        _this.cartData = data\r\n      } else {\r\n        _this.getCartData()\r\n      }\r\n\r\n      _this.isAllCheckbox()\r\n    },\r\n\r\n    //是否全选\r\n    isAllCheckbox: function() {\r\n      let _this = this\r\n      let cartData = _this.cartData.list\r\n      let goSettlement = false\r\n      let flag = true\r\n      for (let key in cartData) {\r\n        if (\r\n          cartData[key].selected == false &&\r\n          cartData[key].stockNo == false\r\n        ) {\r\n          flag = false\r\n        }\r\n        if (cartData[key].selected == true) {\r\n          goSettlement = true\r\n        }\r\n      }\r\n      if (cartData.length <= 0) {\r\n        flag = false\r\n      }\r\n\r\n      _this.checkboxAll = flag\r\n      _this.goSettlement = goSettlement\r\n    },\r\n\r\n    //全选操作\r\n    checkboxAllButton: function(e) {\r\n      if (this.checkboxAll == true) {\r\n        this.checkboxAll = false\r\n        this.setAllCheckbox(false)\r\n      } else {\r\n        this.checkboxAll = true\r\n        this.setAllCheckbox(true)\r\n      }\r\n    },\r\n\r\n    //全选设置\r\n    setAllCheckbox: function(e) {\r\n      let _this = this\r\n      let cartData = _this.cartData\r\n      if (e) {\r\n        //全选\r\n        for (let key in cartData.list) {\r\n          if (cartData.list[key].stockNo == false) {\r\n            cartData.list[key].selected = true\r\n          }\r\n        }\r\n      } else {\r\n        //全不选\r\n        for (let key in cartData.list) {\r\n          cartData.list[key].selected = false\r\n        }\r\n      }\r\n\r\n      _this.cartData = cartData\r\n      _this.setNumsData()\r\n      _this.isAllCheckbox()\r\n    },\r\n\r\n    //设置刷新数据\r\n    setNumsData: function() {\r\n      let _this = this\r\n      let cartData = _this.cartData\r\n      let cartIds = []\r\n      for (let key in cartData.list) {\r\n        if (cartData.list[key].selected) {\r\n          cartIds.push(cartData.list[key].id)\r\n        } else {\r\n          // \t\t\t\t\tif (cartData.list[key].products.promotion_list) {\r\n          // \t\t\t\t\t\tfor (let k in cartData.list[key].products.promotion_list) {\r\n          // \t\t\t\t\t\t\tcartData.list[key].products.promotion_list[k].type = 1;\r\n          // \t\t\t\t\t\t}\r\n          // \t\t\t\t\t}\r\n        }\r\n      }\r\n      _this.cartIds = cartIds\r\n      _this.cartData = cartData\r\n      if (cartIds.length == 0) {\r\n        let cartData = _this.cartData\r\n        for (let k in cartData.promotion_list) {\r\n          cartData.promotion_list[k].type = 1\r\n        }\r\n        cartData.goods_pmt = '0.00'\r\n        cartData.order_pmt = '0.00'\r\n        cartData.amount = '0.00'\r\n        _this.cartData = cartData\r\n      } else {\r\n        _this.getCartData()\r\n      }\r\n    },\r\n\r\n    //购物车数量调整\r\n    bindChange(value, e) {\r\n      let _this = this\r\n      let id = e.id\r\n      let num = value\r\n      let cartData = _this.cartData\r\n      let changeSelected = false\r\n      for (let key in cartData.list) {\r\n        if (cartData.list[key].id == id) {\r\n          if (num <= cartData.list[key].products.stock) {\r\n            cartData.list[key].quantity = num\r\n            changeSelected = true\r\n          }\r\n        }\r\n      }\r\n      if (changeSelected) {\r\n        _this.cartData = cartData\r\n        _this.cartId = id\r\n        _this.cartNum = num\r\n        _this.$common.throttle(_this.bindCartNumberOperation, _this, 350)\r\n      } else {\r\n        //_this.$common.errorToShow('数量错误1');\r\n      }\r\n      return false\r\n    },\r\n\r\n    //数量减一操作\r\n    bindCartNumberOperation: function() {\r\n      let _this = this\r\n      _this.setCartNum(_this.cartId, _this.cartNum)\r\n    },\r\n\r\n    //设置购物车数量\r\n    setCartNum: function(id, quantity) {\r\n      let _this = this\r\n      let data = {\r\n        id: id,\r\n        quantity: quantity\r\n      }\r\n      _this.$api.setCartNum(data, function(res) {\r\n        if (_this.cartIds.indexOf(id) > -1) {\r\n          //_this.getCartData();\r\n          if (res.status) {\r\n            _this.$nextTick(function() {\r\n              _this.showHandle(res.data, false)\r\n            })\r\n          } else {\r\n            _this.$common.errorToShow(res.msg)\r\n          }\r\n        } else {\r\n          _this.$nextTick(function() {\r\n            _this.showHandle(res.data, false)\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n    //删除事件\r\n    del: function(index, id) {\r\n      let _this = this\r\n      let cartid = id //cart_id\r\n      //移除渲染\r\n      _this.cartData.list.splice(index, 1)\r\n      _this.cartData = _this.cartData\r\n      _this.isLoad = true\r\n\r\n      //移除数据库\r\n      let data = {\r\n        ids: cartid\r\n      }\r\n      _this.$api.removeCart(data, function(res) {\r\n        if (res.status) {\r\n          _this.$common.successToShow(res.msg)\r\n        }\r\n        _this.setNumsData()\r\n        _this.isAllCheckbox()\r\n      })\r\n    },\r\n\r\n    //收藏\r\n    collection: function(e) {\r\n      let _this = this\r\n      app.db.userToken(function(token) {\r\n        let data = {\r\n          goods_id: e.currentTarget.dataset.goodsid\r\n        }\r\n        app.api.goodsCollection(data, function(res) {\r\n          for (let k in _this.cartData.list) {\r\n            if (\r\n              _this.cartData.list[k].products.goods_id ==\r\n              e.currentTarget.dataset.goodsid\r\n            ) {\r\n              if (res.msg == '收藏成功') {\r\n                _this.cartData.list[k].isCollection = true\r\n              } else {\r\n                _this.cartData.list[k].isCollection = false\r\n              }\r\n            }\r\n          }\r\n          wx.showToast({\r\n            title: res.msg,\r\n\t\t\tcomplete: function () {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tuni.hideToast();\r\n\t\t\t\t},1000);\r\n\t\t\t}\r\n          })\r\n        })\r\n      })\r\n    },\r\n\r\n    //去结算\r\n    settlement: function(e) {\r\n      let _this = this\r\n      if (_this.goSettlement) {\r\n        let cartData = _this.cartData.list\r\n        let newData = ''\r\n        for (let key in cartData) {\r\n          if (cartData[key].selected == true) {\r\n            newData += ',' + cartData[key].id\r\n          }\r\n        }\r\n        if (newData.substr(0, 1) == ',') {\r\n          newData = newData.substr(1)\r\n        }\r\n        if (newData.length > 0) {\r\n          _this.$common.navigateTo(\r\n            '/pages/goods/place-order/index?cart_ids=' + JSON.stringify(newData)\r\n          )\r\n          return true\r\n        } else {\r\n          //没有选择不跳转\r\n        }\r\n      }\r\n    },\r\n\r\n    //手指触摸动作开始 记录起点X坐标\r\n    touchstart: function(e) {\r\n      //开始触摸时 重置所有删除\r\n      let _this = this\r\n      _this.cartData.list.forEach(function(v, i) {\r\n        if (v.isTouchMove)\r\n          //只操作为true的\r\n          v.isTouchMove = false\r\n      })\r\n      _this.setData({\r\n        startX: e.changedTouches[0].clientX,\r\n        startY: e.changedTouches[0].clientY,\r\n        cartData: _this.cartData\r\n      })\r\n    },\r\n\r\n    //滑动事件处理\r\n    touchmove: function(e) {\r\n      let _this = this\r\n      let index = e.currentTarget.dataset.index //当前索引\r\n      let startX = _this.startX //开始X坐标\r\n      let startY = _this.startY //开始Y坐标\r\n      let touchMoveX = e.changedTouches[0].clientX //滑动变化坐标\r\n      let touchMoveY = e.changedTouches[0].clientY //滑动变化坐标\r\n      let angle = _this.angle(\r\n        { X: startX, Y: startY },\r\n        { X: touchMoveX, Y: touchMoveY }\r\n      ) //获取滑动角度\r\n      _this.cartData.list.forEach(function(v, i) {\r\n        v.isTouchMove = false\r\n        //滑动超过30度角 return\r\n        if (Math.abs(angle) > 30) return\r\n        if (i == index) {\r\n          if (touchMoveX > startX)\r\n            //右滑\r\n            v.isTouchMove = false\r\n          else\r\n            //左滑\r\n            v.isTouchMove = true\r\n        }\r\n      })\r\n      //更新数据\r\n      _this.setData({\r\n        cartData: _this.cartData\r\n      })\r\n    },\r\n\r\n    //计算滑动角度\r\n    angle: function(start, end) {\r\n      let _X = end.X - start.X,\r\n        _Y = end.Y - start.Y\r\n      //返回角度 /Math.atan()返回数字的反正切值\r\n      return 360 * Math.atan(_Y / _X) / (2 * Math.PI)\r\n    },\r\n    //点击编辑\r\n    editBtn: function() {\r\n      this.editStatus = true\r\n    },\r\n    //点击完成\r\n    editNoBtn: function() {\r\n      let _this = this\r\n      this.editStatus = false\r\n      let selected = false\r\n      for (let i in _this.cartData.list) {\r\n        if (_this.cartData.list[i].selected) {\r\n          selected = true\r\n          break\r\n        }\r\n      }\r\n      if (selected) {\r\n        _this.getCartData()\r\n      }\r\n    },\r\n\r\n    delList: function() {\r\n      let _this = this\r\n      let ids = []\r\n      for (let k in _this.cartData.list) {\r\n        if (_this.cartData.list[k].selected) {\r\n          ids += _this.cartData.list[k].id + ','\r\n        }\r\n      }\r\n      let data = {\r\n        ids: ids\r\n      }\r\n      _this.$api.removeCart(data, function(res) {\r\n        if (res.status) {\r\n          _this.$common.successToShow(res.msg)\r\n        }\r\n        _this.setNumsData()\r\n        _this.isAllCheckbox()\r\n      })\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}